/*! For license information please see index.node.js.LICENSE.txt */
(()=>{"use strict";var e={369:(e,t,r)=>{var n=r(352)("cookies"),i=r(815),o=r(685),s={},a=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/,u=/^(?:lax|none|strict)$/i;function c(e,t,r){if(!(this instanceof c))return new c(e,t,r);this.secure=void 0,this.request=e,this.response=t,r&&(Array.isArray(r)?(n('"keys" argument; provide using options {"keys": [...]}'),this.keys=new i(r)):r.constructor&&"Keygrip"===r.constructor.name?(n('"keys" argument; provide using options {"keys": keygrip}'),this.keys=r):(this.keys=Array.isArray(r.keys)?new i(r.keys):r.keys,this.secure=r.secure))}function l(e,t,r){if(!a.test(e))throw new TypeError("argument name is invalid");if(t&&!a.test(t))throw new TypeError("argument value is invalid");for(var e in this.name=e,this.value=t||"",r)this[e]=r[e];if(this.value||(this.expires=new Date(0),this.maxAge=null),this.path&&!a.test(this.path))throw new TypeError("option path is invalid");if(this.domain&&!a.test(this.domain))throw new TypeError("option domain is invalid");if(this.sameSite&&!0!==this.sameSite&&!u.test(this.sameSite))throw new TypeError("option sameSite is invalid")}function f(e,t){if(t.overwrite)for(var r=e.length-1;r>=0;r--)0===e[r].indexOf(t.name+"=")&&e.splice(r,1);e.push(t.toHeader())}c.prototype.get=function(e,t){var r,n,i,o,a,u,c=e+".sig",l=t&&void 0!==t.signed?t.signed:!!this.keys;if((r=this.request.headers.cookie)&&(n=r.match(function(e){return s[e]?s[e]:s[e]=new RegExp("(?:^|;) *"+e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")+"=([^;]*)")}(e)),n)){if(i=n[1],!t||!l)return i;if(o=this.get(c)){if(a=e+"="+i,!this.keys)throw new Error(".keys required for signed cookies");if(!((u=this.keys.index(a,o))<0))return u&&this.set(c,this.keys.sign(a),{signed:!1}),i;this.set(c,null,{path:"/",signed:!1})}}},c.prototype.set=function(e,t,r){var i=this.response,s=this.request,a=i.getHeader("Set-Cookie")||[],u=void 0!==this.secure?!!this.secure:"https"===s.protocol||s.connection.encrypted,c=new l(e,t,r),h=r&&void 0!==r.signed?r.signed:!!this.keys;if("string"==typeof a&&(a=[a]),!u&&r&&r.secure)throw new Error("Cannot send secure cookie over unencrypted connection");if(c.secure=r&&void 0!==r.secure?r.secure:u,r&&"secureProxy"in r&&(n('"secureProxy" option; use "secure" option, provide "secure" to constructor if needed'),c.secure=r.secureProxy),f(a,c),r&&h){if(!this.keys)throw new Error(".keys required for signed cookies");c.value=this.keys.sign(c.toString()),c.name+=".sig",f(a,c)}return(i.set?o.OutgoingMessage.prototype.setHeader:i.setHeader).call(i,"Set-Cookie",a),this},l.prototype.path="/",l.prototype.expires=void 0,l.prototype.domain=void 0,l.prototype.httpOnly=!0,l.prototype.sameSite=!1,l.prototype.secure=!1,l.prototype.overwrite=!1,l.prototype.toString=function(){return this.name+"="+this.value},l.prototype.toHeader=function(){var e=this.toString();return this.maxAge&&(this.expires=new Date(Date.now()+this.maxAge)),this.path&&(e+="; path="+this.path),this.expires&&(e+="; expires="+this.expires.toUTCString()),this.domain&&(e+="; domain="+this.domain),this.sameSite&&(e+="; samesite="+(!0===this.sameSite?"strict":this.sameSite.toLowerCase())),this.secure&&(e+="; secure"),this.httpOnly&&(e+="; httponly"),e},Object.defineProperty(l.prototype,"maxage",{configurable:!0,enumerable:!0,get:function(){return this.maxAge},set:function(e){return this.maxAge=e}}),n.property(l.prototype,"maxage",'"maxage"; use "maxAge" instead'),c.connect=c.express=function(e){return function(t,r,n){t.cookies=r.cookies=new c(t,r,{keys:e}),n()}},c.Cookie=l,e.exports=c},281:(e,t,r)=>{var n=r(469),i={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},o={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},s={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},a={};function u(e){return n.isMemo(e)?s:a[e.$$typeof]||i}a[n.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},a[n.Memo]=s;var c=Object.defineProperty,l=Object.getOwnPropertyNames,f=Object.getOwnPropertySymbols,h=Object.getOwnPropertyDescriptor,d=Object.getPrototypeOf,p=Object.prototype;e.exports=function e(t,r,n){if("string"!=typeof r){if(p){var i=d(r);i&&i!==p&&e(t,i,n)}var s=l(r);f&&(s=s.concat(f(r)));for(var a=u(t),v=u(r),g=0;g<s.length;++g){var y=s[g];if(!(o[y]||n&&n[y]||v&&v[y]||a&&a[y])){var b=h(r,y);try{c(t,y,b)}catch(e){}}}}return t}},718:(e,t,r)=>{var n;r.d(t,{g:()=>n}),function(e){e.RENDER="render",e.SHOW_LOADER="showLoader",e.RETURN_NULL="returnNull",e.REDIRECT_TO_LOGIN="redirectToLogin",e.REDIRECT_TO_APP="redirectToApp"}(n||(n={}))},728:(e,t,r)=>{r.d(t,{Mb:()=>a,P0:()=>o,gY:()=>u,sN:()=>s});var n=r(795),i=function(){return(0,n.i)().cookies.name},o=function(){var e=i();return"".concat(e,".AuthUser")},s=function(){return"".concat(o(),".sig")},a=function(){var e=i();return"".concat(e,".AuthUserTokens")},u=function(){return"".concat(a(),".sig")}},974:(e,t,r)=>{r.d(t,{Y:()=>i});var n=["aud","auth_time","email","email_verified","exp","firebase","iat","iss","name","phone_number","picture","sub","uid","user_id"],i=function(e){void 0===e&&(e={});var t={};return Object.keys(e).forEach((function(r){n.includes(r)||(t[r]=e[r])})),t}},795:(e,t,r)=>{r.d(t,{i:()=>l,v:()=>c});var n,i=r(245),o=r(163),s={debug:!1,onVerifyTokenError:function(e){},onTokenRefreshError:function(e){},cookies:{httpOnly:!0,maxAge:6048e5,overwrite:!0,path:"/",sameSite:"strict",secure:!0,signed:!0}},a=function(){return a=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},a.apply(this,arguments)},u=12096e5,c=function(e){var t;(0,o.Z)("[init] Setting config with provided value:",a(a(a({},t=e),{cookies:a(a({},t.cookies),{keys:["hidden"]})}),t.firebaseAdminInitConfig&&{firebaseAdminInitConfig:a(a({},t.firebaseAdminInitConfig),t.firebaseAdminInitConfig.credential&&{credential:a(a({},t.firebaseAdminInitConfig.credential),{privateKey:"hidden",clientEmail:"hidden"})})}));var r=e.cookies,c=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]])}return r}(e,["cookies"]),l=a(a(a({},s),c),{cookies:a(a({},s.cookies),r||{})}),f=function(e){var t=[];e.tokenChangedHandler&&(e.loginAPIEndpoint&&t.push('The "loginAPIEndpoint" setting should not be set if you are using a "tokenChangedHandler".'),e.logoutAPIEndpoint&&t.push('The "logoutAPIEndpoint" setting should not be set if you are using a "tokenChangedHandler".'),e.onLoginRequestError&&t.push('The "onLoginRequestError" setting should not be set if you are using a "tokenChangedHandler".'),e.onLogoutRequestError&&t.push('The "onLogoutRequestError" setting should not be set if you are using a "tokenChangedHandler".')),e.firebaseClientInitConfig&&e.firebaseClientInitConfig.apiKey||t.push('The "firebaseClientInitConfig.apiKey" value is required.'),e.firebaseAuthEmulatorHost&&e.firebaseAuthEmulatorHost.startsWith("http")&&t.push("The firebaseAuthEmulatorHost should be set without a prefix (e.g., localhost:9099)");var r=["function","undefined"];r.indexOf(typeof e.onVerifyTokenError)<0&&t.push('Invalid next-firebase-auth options: The "onVerifyTokenError" setting must be a function.'),r.indexOf(typeof e.onTokenRefreshError)<0&&t.push('Invalid next-firebase-auth options: The "onTokenRefreshError" setting must be a function.'),r.indexOf(typeof e.onLoginRequestError)<0&&t.push('Invalid next-firebase-auth options: The "onLoginRequestError" setting must be a function.'),r.indexOf(typeof e.onLogoutRequestError)<0&&t.push('Invalid next-firebase-auth options: The "onLogoutRequestError" setting must be a function.');var n=e.cookies.keys,o=Array.isArray(n)?n.length&&(!n.filter||n.filter((function(e){return void 0!==e})).length):!!n;return(0,i.Z)()?(e.tokenChangedHandler||(e.loginAPIEndpoint||t.push('The "loginAPIEndpoint" setting is required.'),e.logoutAPIEndpoint||t.push('The "logoutAPIEndpoint" setting is required.')),e.firebaseAdminInitConfig&&e.firebaseAdminInitConfig.credential&&e.firebaseAdminInitConfig.credential.privateKey&&t.push('The "firebaseAdminInitConfig" private key setting should not be available on the client side.'),o&&t.push('The "cookies.keys" setting should not be available on the client side.')):(e.cookies.name||t.push('The "cookies.name" setting is required on the server side.'),e.firebaseAuthEmulatorHost&&(process.env.FIREBASE_AUTH_EMULATOR_HOST?process.env.FIREBASE_AUTH_EMULATOR_HOST!==e.firebaseAuthEmulatorHost&&t.push('The "FIREBASE_AUTH_EMULATOR_HOST" environment variable should be the same as the host set in the config'):t.push('The "FIREBASE_AUTH_EMULATOR_HOST" environment variable should be set if you are using the "firebaseAuthEmulatorHost" option')),(!e.cookies.maxAge||e.cookies.maxAge>u)&&t.push('The "cookies.maxAge" setting must be less than two weeks ('.concat(u," ms)."))),{isValid:0===t.length,errors:t}}(l),h=f.isValid,d=f.errors;if(!h)throw new Error("Invalid next-firebase-auth options: ".concat(d.join(" ")));n=l},l=function(){if(!n)throw new Error("next-firebase-auth must be initialized before rendering.");return n}},681:(e,t,r)=>{r.d(t,{kT:()=>u,ej:()=>s,d8:()=>a});var n=r(369),i=r.n(n),o=function(e,t){var r=e.req,n=e.res,o=void 0===t?{}:t,s=o.keys,a=o.secure;return i()(r,n,{keys:s,secure:a})},s=function(e,t,r){var n=t.req,i=t.res,s=void 0===i?{getHeader:function(){return[]},setHeader:function(){return{call:function(){}}}}:i,a=void 0===r?{}:r,u=a.keys,c=a.secure,l=a.signed,f=void 0!==l&&l;if(f&&!(Array.isArray(u)?u.length&&(!u.filter||u.filter((function(e){return void 0!==e})).length):u))throw new Error('The "keys" value must be provided when using signed cookies.');if(!n)throw new Error('The "req" argument is required when calling `getCookie`.');var h,d,p=o({req:n,res:s},{keys:u,secure:c}).get(e,{signed:f});return p?(h=p,d=Buffer.from(h,"base64").toString("utf8"),JSON.parse(d)):void 0},a=function(e,t,r,n){var i=r.req,s=r.res,a=void 0===n?{}:n,u=a.keys,c=a.domain,l=a.httpOnly,f=a.maxAge,h=a.overwrite,d=a.path,p=a.sameSite,v=a.secure,g=a.signed;if(g&&!u)throw new Error('The "keys" value must be provided when using signed cookies.');if(!s)throw new Error('The "res" argument is required when calling `setCookie`.');var y,b,w=o({req:i,res:s},{keys:u,secure:v}),m=null==t?void 0:(y=t,b=JSON.stringify(y),Buffer.from(b).toString("base64"));w.set(e,m,{domain:c,httpOnly:l,maxAge:f,overwrite:h,path:d,sameSite:p,secure:v,signed:g})},u=function(e,t,r){a(e,void 0,t,r)}},63:(e,t,r)=>{r.d(t,{Z:()=>u});var n=r(245),i=r(974),o=function(){return o=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},o.apply(this,arguments)},s=function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{u(n.next(e))}catch(e){o(e)}}function a(e){try{u(n.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}u((n=n.apply(e,t||[])).next())}))},a=function(e,t){var r,n,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(a){return function(u){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,a[0]&&(s=0)),s;)try{if(r=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,n=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){s=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){s.label=a[1];break}if(6===a[0]&&s.label<i[1]){s.label=i[1],i=a;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(a);break}i[2]&&s.ops.pop(),s.trys.pop();continue}a=t.call(e,s)}catch(e){a=[6,e],n=0}finally{r=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}};const u=function(e){var t=void 0===e?{}:e,u=t.firebaseUserClientSDK,c=t.firebaseUserAdminSDK,l=t.serializedUser,f=t.clientInitialized,h=void 0!==f&&f,d=t.token,p=void 0===d?null:d,v=t.claims;if([u,c,l].reduce((function(e,t){return t?e+1:e}),0)>1)throw new Error('createUser cannot receive more than one of the following properties: "firebaseUserClientSDK", "firebaseUserAdminSDK", "serializedUser"');if(h&&(c||l))throw new Error('The "clientInitialized" value can only be true when called with the "firebaseUserClientSDK" property or no user.');if(v&&(c||l))throw new Error('The "claims" value can only be set in conjunction with the "firebaseUserClientSDK" property.');if(p&&!c)throw new Error('The "token" value can only be set if the "firebaseUserAdminSDK" property is defined.');var g={},y=null,b=null,w=!1,m=null,k=null,T=null,E=null,A=function(){return s(void 0,void 0,void 0,(function(){return a(this,(function(e){return[2,null]}))}))},x=function(){return s(void 0,void 0,void 0,(function(){return a(this,(function(e){return[2]}))}))},S=null;if(u){if((0,n.Z)()){var O=r(324).getApp,U=r(610),R=U.getAuth,I=U.signOut;x=function(){return s(void 0,void 0,void 0,(function(){return a(this,(function(e){return[2,I(R(O()))]}))}))}}g=(0,i.Y)(v),y=u.uid,b=u.email,w=u.emailVerified,k=u.phoneNumber,T=u.displayName,E=u.photoURL,m=u.tenantId,A=function(e){return s(void 0,void 0,void 0,(function(){return a(this,(function(t){return[2,u.getIdToken(e)]}))}))},S=null}else if(c)g=(0,i.Y)(c),y=c.uid,b=c.email||null,w=c.email_verified||!1,k=c.phone_number||null,T=c.name,m=c.firebase&&c.firebase.tenant||null,E=c.picture||null,A=function(){return s(void 0,void 0,void 0,(function(){return a(this,(function(e){return[2,p]}))}))},S=p;else if(l){var C=JSON.parse(l);g=C.claims||{},y=C.id||null,b=C.email||null,w=C.emailVerified,m=C.tenantId||null,k=C.phoneNumber||null,T=C.displayName||null,E=C.photoURL||null,A=function(){return s(void 0,void 0,void 0,(function(){return a(this,(function(e){return[2,C._token||null]}))}))},S=C._token||null}return{id:y,email:b,emailVerified:w,tenantId:m,phoneNumber:k,displayName:T,photoURL:E,claims:g,getIdToken:A,clientInitialized:h,firebaseUser:u||null,signOut:x,serialize:function(e){var t=(void 0===e?{}:e).includeToken,r=void 0===t||t;return JSON.stringify(o({id:y,claims:g,email:b,emailVerified:w,tenantId:m,phoneNumber:k,displayName:T,photoURL:E,clientInitialized:h},r&&{_token:S}))}}}},157:(e,t,r)=>{r.d(t,{_:()=>y,y:()=>g});const n=require("firebase-admin/auth");var i=r(144),o=r(63),s=r(795),a=r(163),u=function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{u(n.next(e))}catch(e){o(e)}}function a(e){try{u(n.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}u((n=n.apply(e,t||[])).next())}))},c=function(e,t){var r,n,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(a){return function(u){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,a[0]&&(s=0)),s;)try{if(r=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,n=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){s=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){s.label=a[1];break}if(6===a[0]&&s.label<i[1]){s.label=i[1],i=a;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(a);break}i[2]&&s.ops.pop(),s.trys.pop();continue}a=t.call(e,s)}catch(e){a=[6,e],n=0}finally{r=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}},l=function(){return process.env.FIREBASE_AUTH_EMULATOR_HOST?"http://".concat(process.env.FIREBASE_AUTH_EMULATOR_HOST,"/"):"https://"},f=function(){return(0,s.i)().firebaseClientInitConfig.apiKey},h=function(e){return"[verifyIdToken] Error verifying the ID token: ".concat(e,". The user will be unauthenticated.")},d=function(){if("undefined"==typeof fetch)throw new Error("A `fetch` global is required when using next-firebase-auth. See documentation on setting up a `fetch` polyfill.")},p=function(e){return e?(0,n.getAuth)().tenantManager().authForTenant(e):(0,n.getAuth)()},v=function(e){return u(void 0,void 0,void 0,(function(){var t,r,n,i;return c(this,(function(o){switch(o.label){case 0:if(!e)throw new Error('The "refreshToken" argument is required.');return t=f(),r="".concat(l(),"securetoken.googleapis.com/v1/token?key=").concat(t),[4,fetch(r,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:"grant_type=refresh_token&refresh_token=".concat(e)})];case 1:return[4,(n=o.sent()).json()];case 2:if(i=o.sent(),!n.ok)throw new Error("Problem refreshing token: ".concat(JSON.stringify(i)));return[2,i.id_token]}}))}))},g=function(e,t){return u(void 0,void 0,void 0,(function(){var r,n,u,l,f,g,y,b,w,m,k,T,E,A;return c(this,(function(c){switch(c.label){case 0:d(),(0,i.Z)(),n=e,u=(0,s.i)(),l=u.onTokenRefreshError,f=u.onVerifyTokenError,g=u.tenantId,y=p(g),c.label=1;case 1:return c.trys.push([1,3,,28]),[4,y.verifyIdToken(e)];case 2:return r=c.sent(),[3,28];case 3:if(b=c.sent(),!(w=b).code)return[3,26];switch(w.code){case"auth/invalid-user-token":case"auth/user-token-expired":case"auth/user-disabled":return[3,4];case"auth/id-token-expired":case"auth/argument-error":return[3,5]}return[3,22];case 4:return n=null,r=void 0,(0,a.Z)(h(w.code)),[3,25];case 5:if(!t)return[3,22];(0,a.Z)("[verifyIdToken] The ID token is expired (error code ".concat(w.code,"). Attempting to refresh the ID token.")),m=!1,c.label=6;case 6:return c.trys.push([6,8,,13]),[4,v(t)];case 7:return n=c.sent(),[3,13];case 8:return k=c.sent(),m=!0,k instanceof Error?l?[4,l(k)]:[3,10]:[3,11];case 9:c.sent(),c.label=10;case 10:return[3,12];case 11:(0,a.Z)(k),c.label=12;case 12:return[3,13];case 13:if(m)return[3,21];(0,a.Z)("[verifyIdToken] Successfully refreshed the ID token."),c.label=14;case 14:return c.trys.push([14,16,,21]),[4,y.verifyIdToken(n)];case 15:return r=c.sent(),[3,21];case 16:return(T=c.sent())instanceof Error?f?[4,f(T)]:[3,18]:[3,19];case 17:c.sent(),c.label=18;case 18:return(E=T).code&&(0,a.Z)(h(E.code)),[3,20];case 19:(0,a.Z)(T),c.label=20;case 20:return[3,21];case 21:return m&&(n=null,r=void 0,(0,a.Z)("[verifyIdToken] Failed to refresh the ID token. The user will be unauthenticated.")),[3,25];case 22:return n=null,r=void 0,f?[4,f(w)]:[3,24];case 23:c.sent(),c.label=24;case 24:(0,a.Z)(h(w.code)),c.label=25;case 25:return[3,27];case 26:n=null,r=void 0,(0,a.Z)(b),c.label=27;case 27:return[3,28];case 28:return(A=(0,o.Z)({firebaseUserAdminSDK:r,token:n})).id&&A.email&&(0,a.Z)("[verifyIdToken] Successfully verified the ID token. The user is authenticated."),[2,A]}}))}))},y=function(e){return u(void 0,void 0,void 0,(function(){var t,r,n,o,s,u,h,v,y,b;return c(this,(function(c){switch(c.label){case 0:return d(),(0,i.Z)(),[4,g(e)];case 1:if(t=c.sent(),r=p(t.tenantId),!t.id)throw new Error("Failed to verify the ID token.");return(0,a.Z)("[setAuthCookies] Getting the Firebase user record."),[4,r.getUser(t.id).catch((function(){return(0,a.Z)("[setAuthCookies] Failed to get the Firebase user record."),{customClaims:{}}}))];case 2:return n=c.sent().customClaims,(0,a.Z)("[setAuthCookies] Getting a refresh token from the ID token."),[4,r.createCustomToken(t.id,n)];case 3:return o=c.sent(),s=f(),u="".concat(l(),"identitytoolkit.googleapis.com/v1/accounts:signInWithCustomToken?key=").concat(s),[4,fetch(u,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:o,returnSecureToken:!0})})];case 4:return[4,(h=c.sent()).json()];case 5:if(v=c.sent(),!h.ok)throw(0,a.Z)("[setAuthCookies] Failed to get a refresh token from the ID token."),new Error("Problem getting a refresh token: ".concat(JSON.stringify(v)));return y=v.idToken,b=v.refreshToken,[2,{idToken:y,refreshToken:b,user:t}]}}))}))}},951:(e,t,r)=>{r.d(t,{Z:()=>l});var n=r(63),i=r(681),o=r(157),s=r(728),a=r(795),u=r(163),c=r(144);const l=function(e){var t,r,l,f,h=e.req,d=e.includeToken,p=void 0===d||d,v=e.authCookieValue,g=e.authCookieSigValue;return t=void 0,r=void 0,f=function(){var e,t,r,l,f,d,y,b,w,m,k,T,E,A;return function(e,t){var r,n,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(a){return function(u){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,a[0]&&(s=0)),s;)try{if(r=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,n=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){s=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){s.label=a[1];break}if(6===a[0]&&s.label<i[1]){s.label=i[1],i=a;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(a);break}i[2]&&s.ops.pop(),s.trys.pop();continue}a=t.call(e,s)}catch(e){a=[6,e],n=0}finally{r=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}}(this,(function(x){switch(x.label){case 0:if(e=(0,a.i)().cookies,t=e.keys,r=e.secure,l=e.signed,(0,c.Z)(),d=h,!h){if(!v)throw new Error('Either "req" or "authCookieValue" must be provided.');y=p?(0,s.Mb)():(0,s.P0)(),b=p?(0,s.gY)():(0,s.sN)(),w=g?"".concat(b,"=").concat(g,";"):"",m="".concat(y,"=").concat(v,";").concat(g?" ".concat(w):""),d={headers:{cookie:m}}}if(!d)throw new Error('When "authCookieValue" is not provided, "req" must be defined.');return p?((0,u.Z)("[getUserFromCookies] Attempting to get user info from cookies via the ID token."),A=(0,i.ej)((0,s.Mb)(),{req:d},{keys:t,secure:r,signed:l}),k=A?JSON.parse(A):{},T=k.idToken,E=k.refreshToken,T?((0,u.Z)("[getUserFromCookies] Successfully retrieved the ID token from cookies."),[4,(0,o.y)(T,E)]):[3,2]):[3,4];case 1:return f=x.sent(),[3,3];case 2:(0,u.Z)("[getUserFromCookies] Failed to retrieve the ID token from cookies. This will happen if the user is not logged in, the provided cookie values are invalid, or the cookie values don't align with your cookie settings. The user will be unauthenticated."),f=(0,n.Z)(),x.label=3;case 3:return[3,5];case 4:if(!l)throw new Error("Cookies must be signed when using withUserSSR.");(0,u.Z)("[getUserFromCookies] Attempting to get user info from cookies (not using the ID token)."),(A=(0,i.ej)((0,s.P0)(),{req:d},{keys:t,secure:r,signed:l}))?(0,u.Z)("[getUserFromCookies] Successfully retrieved the user info from cookies."):(0,u.Z)("[getUserFromCookies] Failed to retrieve the user info from cookies. The provided cookie values might be invalid or not align with your cookie settings. The user will be unauthenticated."),f=(0,n.Z)({serializedUser:A}),x.label=5;case 5:return[2,f]}}))},new((l=void 0)||(l=Promise))((function(e,n){function i(e){try{s(f.next(e))}catch(e){n(e)}}function o(e){try{s(f.throw(e))}catch(e){n(e)}}function s(t){var r;t.done?e(t.value):(r=t.value,r instanceof l?r:new l((function(e){e(r)}))).then(i,o)}s((f=f.apply(t,r||[])).next())}))}},144:(e,t,r)=>{r.d(t,{Z:()=>a});const n=require("firebase-admin/app");var i=r(795),o=r(163),s=function(){return s=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},s.apply(this,arguments)};const a=function(){if(!(0,n.getApps)().length){var e=(0,i.i)(),t=e.firebaseAdminInitConfig,r=e.useFirebaseAdminDefaultCredential;if(!t&&!r)throw new Error('Missing firebase-admin credentials in next-firebase-auth. Set "firebaseAdminInitConfig", "useFirebaseAdminDefaultCredential", or initialize firebase-admin yourself.');(0,n.initializeApp)(s(s({},t),{credential:r?(0,n.applicationDefault)():(0,n.cert)(s({},null==t?void 0:t.credential))})),(0,o.Z)("[init] Initialized the Firebase admin SDK.")}}},245:(e,t,r)=>{r.d(t,{Z:()=>n});const n=function(){return"undefined"!=typeof window}},163:(e,t,r)=>{r.d(t,{Z:()=>a,y:()=>s});var n=r(245),i=function(e,t,r){if(r||2===arguments.length)for(var n,i=0,o=t.length;i<o;i++)!n&&i in t||(n||(n=Array.prototype.slice.call(t,0,i)),n[i]=t[i]);return e.concat(n||Array.prototype.slice.call(t))},o=!1,s=function(e){o=e};const a=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(o){var r=(0,n.Z)()?["%cnext-firebase-auth","background: #ffa000; color: #fff; border-radius: 2px; padding: 2px 6px"]:["next-firebase-auth:"];console.log.apply(console,i(i([],r,!1),e,!1))}}},739:(e,t,r)=>{r.d(t,{U:()=>a,j:()=>u});var n=r(795),i=function(){return i=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},i.apply(this,arguments)},o=function(e){var t=e.ctx,r=e.user,n=e.redirectDestination;if("function"==typeof n){var s=n({ctx:t,user:r});return o({ctx:t,user:r,redirectDestination:s})}return"string"==typeof n?{destination:n,permanent:!1}:"object"==typeof n?i({permanent:!1},n):void 0},s=function(e){var t=e.redirectConfigName,r=e.redirectURL,i=e.ctx,s=e.user,a=r||(0,n.i)()[t];return function(e,t){if(!t||"string"!=typeof t&&!("destination"in t))throw new Error('The "'.concat(e,'" must be set to a non-empty string, an object literal containing "destination", or a function that returns either.'));return t}(t,o({ctx:i,user:s,redirectDestination:a}))},a=function(e){var t=e.redirectURL,r=e.user,n=e.ctx;return s({redirectConfigName:"authPageURL",redirectURL:t,user:r,ctx:n})},u=function(e){var t=e.redirectURL,r=e.user,n=e.ctx;return s({redirectConfigName:"appPageURL",redirectURL:t,user:r,ctx:n})}},355:(e,t,r)=>{r.d(t,{S:()=>i,Z:()=>o});var n=r(689),i=(0,n.createContext)(void 0);const o=function(){var e=(0,n.useContext)(i);if(!e)throw new Error("When using `useUser`, the page must be wrapped in `withUser`.");return e}},85:(e,t,r)=>{r.d(t,{Z:()=>T});var n=r(281),i=r.n(n),o=r(63),s=r(689),a=r(324),u=r(610),c=r(795),l=r(974),f=r(163),h=function(){return h=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},h.apply(this,arguments)},d=function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{u(n.next(e))}catch(e){o(e)}}function a(e){try{u(n.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}u((n=n.apply(e,t||[])).next())}))},p=function(e,t){var r,n,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(a){return function(u){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,a[0]&&(s=0)),s;)try{if(r=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,n=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){s=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){s.label=a[1];break}if(6===a[0]&&s.label<i[1]){s.label=i[1],i=a;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(a);break}i[2]&&s.ops.pop(),s.trys.pop();continue}a=t.call(e,s)}catch(e){a=[6,e],n=0}finally{r=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}},v=function(e){return d(void 0,void 0,void 0,(function(){var t,r,n,i,o,s,a,u,l,h;return p(this,(function(d){switch(d.label){case 0:return t=(0,c.i)(),r=t.loginAPIEndpoint,n=t.logoutAPIEndpoint,i=t.onLoginRequestError,o=t.onLogoutRequestError,e.id&&e.email?((0,f.Z)("[withUser] Calling the login endpoint."),[4,e.getIdToken()]):[3,11];case 1:if(a=d.sent(),!r)throw new Error("Invalid config.");d.label=2;case 2:return d.trys.push([2,6,,10]),[4,fetch(r,{method:"POST",headers:{Authorization:a||void 0},credentials:"include"})];case 3:return(s=d.sent()).ok?[3,5]:[4,s.json()];case 4:throw l=d.sent(),(0,f.Z)("[withUser] The call to the login endpoint failed with status ".concat(s.status," and response: ").concat(JSON.stringify(l))),new Error("Received ".concat(s.status," response from login API endpoint: ").concat(JSON.stringify(l)));case 5:return[3,10];case 6:return u=d.sent(),i&&u instanceof Error?[4,i(u)]:[3,8];case 7:return d.sent(),[3,9];case 8:throw u;case 9:return[3,10];case 10:return[3,20];case 11:if((0,f.Z)("[withUser] Calling the logout endpoint."),!n)throw new Error("Invalid config.");d.label=12;case 12:return d.trys.push([12,16,,20]),[4,fetch(n,{method:"POST",credentials:"include"})];case 13:return(s=d.sent()).ok?[3,15]:[4,s.json()];case 14:throw l=d.sent(),(0,f.Z)("[withUser] The call to the logout endpoint failed with status ".concat(s.status," and response: ").concat(JSON.stringify(l))),new Error("Received ".concat(s.status," response from logout API endpoint: ").concat(JSON.stringify(l)));case 15:return[3,20];case 16:return h=d.sent(),o&&h instanceof Error?[4,o(h)]:[3,18];case 17:return d.sent(),[3,19];case 18:throw h;case 19:return[3,20];case 20:return[2,s]}}))}))},g=function(e){return d(void 0,void 0,void 0,(function(){var t,r;return p(this,(function(n){return t=(0,c.i)().tokenChangedHandler,r=(0,o.Z)({firebaseUserClientSDK:e,clientInitialized:!0}),t?((0,f.Z)('[withUser] Calling the custom "tokenChangedHandler" provided in the config.'),[2,t(r)]):[2,v(r)]}))}))};const y=function(){var e=(0,s.useState)({user:null,claims:{},initialized:!1}),t=e[0],r=e[1],n=(0,s.useState)(!1),i=n[0],o=n[1];return(0,s.useEffect)((function(){var e=!1,t=(0,u.onIdTokenChanged)((0,u.getAuth)((0,a.getApp)()),(function(t){return d(void 0,void 0,void 0,(function(){var n,i;return p(this,(function(s){switch(s.label){case 0:return(0,f.Z)("[withUser] The Firebase ID token changed. New Firebase user:",t),o(!1),n={},t?[4,(0,u.getIdTokenResult)(t)]:[3,2];case 1:i=s.sent(),n=(0,l.Y)(i.claims),s.label=2;case 2:return r({user:t,claims:n,initialized:!0}),[4,g(t||void 0)];case 3:return s.sent(),e?(0,f.Z)("[withUser] Component unmounted before completing the auth API request."):(o(!0),(0,f.Z)("[withUser] Completed the auth API request.")),[2]}}))}))}));return function(){t(),e=!0}}),[]),h(h({},t),{authRequestCompleted:i})};var b=r(718),w=r(245),m=r(739),k=function(){return k=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},k.apply(this,arguments)};const T=function(e){var t=void 0===e?{}:e,n=t.whenAuthed,s=void 0===n?b.g.RENDER:n,a=t.whenUnauthedBeforeInit,u=void 0===a?b.g.RENDER:a,c=t.whenUnauthedAfterInit,l=void 0===c?b.g.RENDER:c,h=t.whenAuthedBeforeRedirect,d=void 0===h?b.g.RETURN_NULL:h,p=t.appPageURL,v=t.authPageURL,g=t.LoaderComponent,T=void 0===g?null:g;return function(e){(0,f.Z)('[withUser] Calling "withUser".');try{var t=r(689),n=r(689),a=n.useEffect,c=n.useCallback,h=n.useMemo,g=r(853).useRouter,E=r(355).S}catch(e){throw"MODULE_NOT_FOUND"===e.code?new Error('The dependencies "react" and "next" are required when calling `withUser`.'):e}var A=function(r){var n=r.userSerialized,i=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]])}return r}(r,["userSerialized"]),A=h((function(){return(0,o.Z)({serializedUser:n})}),[n]),x=y(),S=x.user,O=x.claims,U=x.initialized,R=x.authRequestCompleted,I=h((function(){return(0,o.Z)({firebaseUserClientSDK:S||void 0,clientInitialized:U,claims:O})}),[S,U,O]),C=U?I:A,Z=!!C.id&&!!C.email&&!C.isAnonymous;(0,f.Z)("[withUser] isAuthed",Z);var P=C.clientInitialized,_=Z&&s===b.g.REDIRECT_TO_APP;(0,f.Z)("[withUser] willRedirectToApp",_),(0,f.Z)("[withUser] isAuthed",Z),(0,f.Z)("[withUser] whenAuthed",s);var D=_&&(0,w.Z)()&&R;(0,f.Z)("[withUser] authRequestCompleted",R);var q=!Z&&(!P&&u===b.g.REDIRECT_TO_LOGIN||P&&l===b.g.REDIRECT_TO_LOGIN);(0,f.Z)("[withUser] isAuthed",Z),(0,f.Z)("[withUser] isInitialized",P),(0,f.Z)("[withUser] whenUnauthedBeforeInit",u),(0,f.Z)("[withUser] whenUnauthedAfterInit",l);var L=q&&(0,w.Z)()&&(u===b.g.REDIRECT_TO_LOGIN||R);(0,f.Z)("[withUser] authRequestCompleted",q),(0,f.Z)("[withUser] isClientSide",(0,w.Z)());var N=g(),j=c((function(e){var t=e.basePath,r=e.destination;!1===t?window.location.replace(r):N.replace(r)}),[N]),H=c((function(){(0,f.Z)("[withUser] Redirecting to app.");var e=(0,m.j)({user:C,redirectURL:p});j(e)}),[C,j]),F=c((function(){(0,f.Z)("[withUser] Redirecting to login.");var e=(0,m.U)({user:C,redirectURL:v});j(e)}),[C,j]);a((function(){(0,w.Z)()&&(D?((0,f.Z)("[withUser] shouldRedirectToApp = true"),H()):L&&((0,f.Z)("[withUser] shouldRedirectToLogin = true"),F()))}),[D,L,H,F]);var z,M=T?t.createElement(T,null):null,K=t.createElement(E.Provider,{value:C},t.createElement(e,k({},i)));return z=_?d===b.g.RENDER?K:d===b.g.SHOW_LOADER?M:null:q?u===b.g.RETURN_NULL?null:u===b.g.SHOW_LOADER?M:K:Z||R?K:u===b.g.SHOW_LOADER?M:u===b.g.RETURN_NULL?null:K,(0,f.Z)("[withUser] Set user to:",C),z};return A.displayName="WithUserHOC",i()(A,e),A}}},919:(e,t,r)=>{r.d(t,{Z:()=>u});var n=r(951),i=r(718),o=r(739),s=r(163),a=function(){return a=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},a.apply(this,arguments)};const u=function(e,t){var r=void 0===e?{}:e,u=r.whenAuthed,c=void 0===u?i.g.RENDER:u,l=r.whenUnauthed,f=void 0===l?i.g.RENDER:l,h=r.appPageURL,d=void 0===h?void 0:h,p=r.authPageURL,v=void 0===p?void 0:p,g=(void 0===t?{}:t).useToken,y=void 0===g||g;return function(e){return function(t){return r=void 0,u=void 0,h=function(){var r,u,l,h;return function(e,t){var r,n,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(a){return function(u){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,a[0]&&(s=0)),s;)try{if(r=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,n=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){s=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){s.label=a[1];break}if(6===a[0]&&s.label<i[1]){s.label=i[1],i=a;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(a);break}i[2]&&s.ops.pop(),s.trys.pop();continue}a=t.call(e,s)}catch(e){a=[6,e],n=0}finally{r=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}}(this,(function(p){switch(p.label){case 0:return(0,s.Z)('[withUserSSR] Calling "withUserSSR" / "withUserTokenSSR".'),r=t.req,[4,(0,n.Z)({req:r,includeToken:y})];case 1:return u=p.sent(),l=u.serialize(),u.id||f!==i.g.REDIRECT_TO_LOGIN?u.id&&u.email&&c===i.g.REDIRECT_TO_APP?((0,s.Z)("[withUserSSR] Redirecting to app."),[2,{redirect:(0,o.j)({ctx:t,user:u,redirectURL:d})}]):e?(t.user=u,[4,e(t)]):[3,3]:((0,s.Z)("[withUserSSR] Redirecting to login."),[2,{redirect:(0,o.U)({ctx:t,user:u,redirectURL:v})}]);case 2:if(h=p.sent()||{}){if("props"in h)return[2,a(a({},h),{props:a(a({},h.props||{}),{userSerialized:l})})];if("notFound"in h||"redirect"in h)return[2,a({},h)]}p.label=3;case 3:return[2,{props:{userSerialized:l}}]}}))},new((l=void 0)||(l=Promise))((function(e,t){function n(e){try{o(h.next(e))}catch(e){t(e)}}function i(e){try{o(h.throw(e))}catch(e){t(e)}}function o(t){var r;t.done?e(t.value):(r=t.value,r instanceof l?r:new l((function(e){e(r)}))).then(n,i)}o((h=h.apply(r,u||[])).next())}));var r,u,l,h}}}},352:e=>{e.exports=require("depd")},324:e=>{e.exports=require("firebase/app")},610:e=>{e.exports=require("firebase/auth")},815:e=>{e.exports=require("keygrip")},853:e=>{e.exports=require("next/router")},689:e=>{e.exports=require("react")},469:e=>{e.exports=require("react-is")},685:e=>{e.exports=require("http")}},t={};function r(n){var i=t[n];if(void 0!==i)return i.exports;var o=t[n]={exports:{}};return e[n](o,o.exports,r),o.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var n={};(()=>{r.r(n),r.d(n,{AuthAction:()=>i.g,getUserFromCookies:()=>o.Z,init:()=>h,setAuthCookies:()=>l,unsetAuthCookies:()=>f,useUser:()=>d,verifyIdToken:()=>s.y,withUser:()=>p,withUserSSR:()=>v,withUserTokenSSR:()=>g});var e=r(795),t=r(163);var i=r(718),o=r(951),s=r(157),a=r(681),u=r(728),c=r(63);const l=function(r,n,i){var o,l,f,h,d=(void 0===i?{}:i).token;return o=void 0,l=void 0,h=function(){var i,o,l,f,h,p;return function(e,t){var r,n,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(a){return function(u){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,a[0]&&(s=0)),s;)try{if(r=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,n=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){s=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){s.label=a[1];break}if(6===a[0]&&s.label<i[1]){s.label=i[1],i=a;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(a);break}i[2]&&s.ops.pop(),s.trys.pop();continue}a=t.call(e,s)}catch(e){a=[6,e],n=0}finally{r=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}}(this,(function(v){switch(v.label){case 0:if((0,t.Z)("[setAuthCookies] Attempting to set auth cookies."),!(i=d||r.headers.authorization))throw new Error('The request must have an Authorization header value, or you should explicitly provide an ID token to "setAuthCookies".');o=null,l=null,f=(0,c.Z)(),v.label=1;case 1:return v.trys.push([1,3,,4]),[4,(0,s._)(i)];case 2:return p=v.sent(),o=p.idToken,l=p.refreshToken,f=p.user,[3,4];case 3:return v.sent(),(0,t.Z)("[setAuthCookies] Failed to verify the ID token. Cannot authenticate the user or get a refresh token."),[3,4];case 4:return h=function(e){return{domain:e.domain,httpOnly:e.httpOnly,keys:e.keys,maxAge:e.maxAge,overwrite:e.overwrite,path:e.path,sameSite:e.sameSite,secure:e.secure,signed:e.signed}}((0,e.i)().cookies),(0,a.d8)((0,u.Mb)(),JSON.stringify({idToken:o,refreshToken:l}),{req:r,res:n},h),(0,a.d8)((0,u.P0)(),f.serialize({includeToken:!1}),{req:r,res:n},h),f.id&&f.email?(0,t.Z)("[setAuthCookies] Set auth cookies for an authenticated user."):(0,t.Z)("[setAuthCookies] Set auth cookies. The user is not authenticated."),[2,{idToken:o,refreshToken:l,user:f}]}}))},new((f=void 0)||(f=Promise))((function(e,t){function r(e){try{i(h.next(e))}catch(e){t(e)}}function n(e){try{i(h.throw(e))}catch(e){t(e)}}function i(t){var i;t.done?e(t.value):(i=t.value,i instanceof f?i:new f((function(e){e(i)}))).then(r,n)}i((h=h.apply(o,l||[])).next())}))};const f=function(r,n){return i=void 0,o=void 0,c=function(){var i;return function(e,t){var r,n,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(a){return function(u){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,a[0]&&(s=0)),s;)try{if(r=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,n=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){s=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){s.label=a[1];break}if(6===a[0]&&s.label<i[1]){s.label=i[1],i=a;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(a);break}i[2]&&s.ops.pop(),s.trys.pop();continue}a=t.call(e,s)}catch(e){a=[6,e],n=0}finally{r=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}}(this,(function(o){return i=function(e){return{domain:e.domain,httpOnly:e.httpOnly,keys:e.keys,maxAge:e.maxAge,overwrite:e.overwrite,path:e.path,sameSite:e.sameSite,secure:e.secure,signed:e.signed}}((0,e.i)().cookies),(0,a.kT)((0,u.Mb)(),{req:r,res:n},i),(0,a.kT)((0,u.P0)(),{req:r,res:n},i),(0,t.Z)("[unsetAuthCookies] Unset auth cookies."),[2]}))},new((s=void 0)||(s=Promise))((function(e,t){function r(e){try{a(c.next(e))}catch(e){t(e)}}function n(e){try{a(c.throw(e))}catch(e){t(e)}}function a(t){var i;t.done?e(t.value):(i=t.value,i instanceof s?i:new s((function(e){e(i)}))).then(r,n)}a((c=c.apply(i,o||[])).next())}));var i,o,s,c};var h=function(r){!function(r){(0,t.y)(!0===(null==r?void 0:r.debug)),(0,e.v)(r)}(r)},d=function(){try{r(689)}catch(e){throw new Error('The dependency "react" is required when calling `useUser`.')}return(0,r(355).Z)()},p=function(e){return(0,r(85).Z)(e)},v=function(e){return(0,r(919).Z)(e,{useToken:!1})},g=function(e){return(0,r(919).Z)(e,{useToken:!0})}})(),module.exports=n})();