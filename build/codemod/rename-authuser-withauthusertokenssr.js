import{get}from"lodash/object";const funcName="withAuthUserTokenSSR",originalPropertyName="AuthUser",newPropertyName="user";export default function transformer(e,r,t){const{jscodeshift:n}=r,o=n(e.source);let a=!1;return o.find(n.ImportDeclaration).forEach((e=>{e.node.source.value.match(/^next-firebase-auth$/)&&e.node.specifiers.forEach((e=>{"ImportSpecifier"===e.type&&e.imported.name===funcName&&(a=!0)}))})),a?o.find(n.CallExpression,{callee:{name:funcName}}).forEach((e=>{const r=get(e,"parentPath.parentPath");if(!r)return;const t=get(r,"value.init.arguments[0].params[0]");if(!t)return;const n=(get(t,"properties")||[]).find((e=>"AuthUser"===e.key.name));n&&(n.key.name="user",n.shorthand=!1)})).toSource(t.printOptions):e.source}